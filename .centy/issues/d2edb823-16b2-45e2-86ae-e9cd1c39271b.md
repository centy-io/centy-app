---
displayNumber: 171
status: open
priority: 2
createdAt: 2026-02-22T00:37:28.068445+00:00
updatedAt: 2026-02-22T00:37:28.068445+00:00
---

# Sort nav-group-project items by item count (most items first)

## Problem

The `nav-group nav-group-project` in `DesktopNav.tsx` (and the mobile equivalent in `MobileNavLinks.tsx`) renders item type links in the order returned by `listItemTypes`. There is no sorting by relevance or usage — item types with more items should appear first for faster navigation.

## Goal

Sort the item type nav links in `nav-group-project` by the number of items each type has, descending (most items → first position).

## Implementation notes

- `ListItemTypesResponse` (`ItemTypeConfigProto`) currently has no item count field
- Two approaches:
  1. **(Preferred)** Add `item_count` to `ItemTypeConfigProto` in `proto/centy.proto` so the daemon returns counts alongside types in a single call — no extra round-trips
  2. Make N additional list calls per item type in the frontend (expensive, not preferred)
- After obtaining counts, sort `itemTypes` in `useHeaderNav.ts` by count descending before returning
- Add `count` (or similar) field to the `NavItemType` interface in `types.ts` if needed

## Files to change

- `proto/centy.proto` — add `item_count` to `ItemTypeConfigProto`
- `gen/centy_pb.ts` — regenerate from proto
- `components/layout/Header/types.ts` — optionally extend `NavItemType`
- `components/layout/Header/useHeaderNav.ts` — sort by count after fetch
- Daemon implementation: populate `item_count` when building the `ListItemTypesResponse`
